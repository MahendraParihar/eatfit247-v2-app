<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>App</title>
  <style type="text/css">
    body {
      padding: 10px;
    }

    tr {
      page-break-inside: avoid;
      page-break-after: auto;
    }

    thead {
      display: table-header-group;
    }

    table {
      width: 100%;
      border: 1px solid #d3d3d3;;
      margin-top: 10px;
      margin-bottom: 10px;
      border-collapse: collapse;
      page-break-inside: auto;
    }

    td,
    th {
      border: 1px solid #d3d3d3;
      border-collapse: collapse;
      padding: 10px;
    }

    th {
      font-weight: bold
    }

    .diet-header {
      text-align: center;
    }

    .recipe-img {
      width: 100%;
      display: flex;
      flex-direction: column;
      row-gap: 10px;
      justify-content: center;
    }

    .img {
      height: 100px;
      width: 100px;
      border-radius: 50%;
    }

    .bold-text {
      font-weight: bold;
    }
  </style>

</head>

<body>
<table>
  <tr>
    <td class="bold-text" style="width:20%;">Name</td>
    <td>{{data.memberName}}</td>
  </tr>
  <tr>
    <td class="bold-text">Plan</td>
    <td>Diet Plan - Cycle {{data.diet.cycleNo}} ({{data.diet.startDate}})</td>
  </tr>
</table>
<br>
<table>
  <thead>
  <th style="width: 20%">Category</th>
  <th style="width: 50%;">Details</th>
  <th style="width: 30%">Recipes</th>
  </thead>
  <tbody>

  {{#each data.diet.dietPlan}}
    <tr>
      <td style="width:20%;">{{recipeCategory}}</td>
      <td style="width:50%;">{{{dietDetail}}}</td>
      <td style="width:30%;">
        <ul>
          {{#each recipeList}}
            <li>{{name}}</li>
          {{/each}}
        </ul>
      </td>
    </tr>
  {{/each}}
  </tbody>
</table>

<br>
{{#if data.recipes}}
  <h4> Recipes:</h4>

  {{#each data.recipes}}
    <table>
      <tbody>
      <tr>
        <td style="width:30%;">
          <div class="recipe-img">
            <div>
              {{#each imagePath}}
                {{img webUrl "img"}}
              {{/each}}
            </div>
            <div>{{title}}</div>
          </div>
        </td>
        <td style="width:70%;">
          <div>{{{ingredients}}}</div>
        </td>
      </tr>
      <tr>
        <td colspan="2">
          <div>{{{preparationMethod}}}</div>
        </td>
      </tr>
      </tbody>
    </table>
  {{/each}}
{{/if}}
</body>

</html>
