<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>App</title>
  <style>
    @media print {
      .page {
        page-break-after: always;
      }
    }

    body {
      padding: 10px;
    }

    tr {
      page-break-inside: avoid;
      page-break-after: auto;
    }

    thead {
      display: table-header-group;
    }

    table {
      width: 100%;
      border: 1px solid #d3d3d3;;
      margin-bottom: 10px;
      border-collapse: collapse;
      page-break-inside: auto;
    }

    td,
    th {
      border: 1px solid #d3d3d3;
      border-collapse: collapse;
      padding: 10px;
    }

    th {
      font-weight: bold
    }

    .bold-text {
      font-weight: bold;
    }

    .recipe-meta {
      display: grid;
      grid-template-columns: 150px auto;
      gap: 20px;
    }

    .recipe-image {
      width: 150px;
      height: 150px;
      border-radius: 25px;
      border: 1px solid #d3d3d3;
    }

    .recipe-title {
      font-size: 26px;
    }

    .recipe-meta-section {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

  </style>

</head>

<body>
<table>
  <tr>
    <td class="bold-text" style="width:20%;">Name</td>
    <td>{{data.memberName}}</td>
  </tr>
  <tr>
    <td class="bold-text">Plan</td>
    <td>Diet Plan - Cycle {{data.diet.cycleNo}} ({{data.diet.startDate}})</td>
  </tr>
</table>
<br>
<table>
  <thead>
  <th style="width: 20%">Category</th>
  <th style="width: 50%;">Details</th>
  <th style="width: 30%">Recipes</th>
  </thead>
  <tbody>

  {{#each data.diet.dietPlan}}
    <tr>
      <td style="width:20%;">{{recipeCategory}}</td>
      <td style="width:50%;">{{{dietDetail}}}</td>
      <td style="width:30%;">
        <ul>
          {{#each recipeList}}
            <li>{{name}}</li>
          {{/each}}
        </ul>
      </td>
    </tr>
  {{/each}}
  </tbody>
</table>

<br>
{{#if data.recipes}}
  <h4> Recipes:</h4>

  {{#each data.recipes}}
    <table>
      <tr>
        <td colspan="2">
          <div class="recipe-meta">
            <div class="recipe-image">
              {{#each imagePath}}
                {{img webUrl "recipe-image"}}
              {{/each}}
            </div>
            <div class="recipe-meta-section">
              <div class="recipe-title">
                {{title}}
              </div>
              <div>Serving: {{serving}}</div>
              <div>Type: {{recipeType}}</div>
            </div>
          </div>
        </td>
      </tr>
      <tr>
        <td style="width: 40%; vertical-align: top;">
          <div style="font-size: 20px; font-style: italic; text-align: center">Ingredients</div>
          <div>
            {{{ingredients}}}
          </div>
        </td>
        <td style="vertical-align: top;">
          <div style="font-size: 20px; font-style: italic; text-align: center">Preparation Method</div>
          <div>
            {{{preparationMethod}}}
          </div>
        </td>
      </tr>
    </table>
    <br>
  {{/each}}
{{/if}}
</body>

</html>